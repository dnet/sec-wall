{% extends "base/_layout.html" %}

{% hyde
    section_title: Documentation
    has_exercises: "True"
    has_this_page: "True"
%}

{% block section_title %}Logging{% endblock %}

{% block exercises %}
    <li>123
    </li>
{% endblock %}

{% block this_page %}
    <li>123
    </li>
    <li><a href="#exercises">Exercises</a></li>
{% endblock %}

{% block content %}

{% markdown %}

<h1>Logging</h1>

<h2 id="intro">Introduction</h2>

There are several layers of logging employed by sec-wall. Proper understanding
of all of them is essential for mastering sec-wall yet not all of them will come
in handy in day-to-day work - some of them are rarely needed, for instance, only
when you're to deal with misbehaving proxy instances, others - like the log of
requests passing through a proxy - will be used more frequently.

What gets logged where and why stems directly from
[how sec-wall has been designed](/documentation/arch/index.html)
and the sketch diagram below captures the flow of information that controls the logging process.
Note that all paths are relative to
[the config.py file](/documentation/ref-docs/config-file.html).

<div style="text-align:center">
  <img src="/media/gfx/logging.png" alt=""/>
</div>

You'll remember that
[sec-wall runs under a control of zdaemon](/documentation/arch/index.html), that's
why when the proxy is starting or stopping, there's a log entry being written
to the ./zdaemon.log file, basically the information which process is that of sec-wall
and that it has just started or stopped.

An unhandled error while processing an incoming client requests is always wrapped
in an HTTP 500 error and any information that might aid with resolving
the issue is being written to the ./logs/proxy.log file.

If config.py or a given URL config say that
[add-auth-info](/documentation/ref-docs/sec-config.html#option-add-auth-info),
[sign-auth-info](/documentation/ref-docs/sec-config.html#option-sign-auth-info)
or
[add_invocation_id](/documentation/ref-docs/config-file.html#add_invocation_id)
are in effect, the necessary HTTP headers are created. Their format is documented
in
[a separate section](/ZZZ).

The regular log entries are being written to syslog by default and their format
is documented
in
[a separate section](/ZZZ).
Whether they're written at all though depends on the log level configured.
They're emitted on either INFO or ERROR level so if you change the log level to,
say, CRITICAL, you'll never have any regular log messages written to the logs.

<h2 id="examples">Examples</h2>

There's [a whole chapter devoted to nothing but showing various examples of sec-wall's configuration files](/ZZZ),
head over there for more information.

{% endmarkdown %}

{% endblock %}
